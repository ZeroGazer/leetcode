class Solution {
    public String[] reorderLogFiles(String[] logs) {
        Map<String, List<String>> letterLogToIds = new TreeMap<>();
        List<String> digitLogs = new ArrayList<>();
        for (String log : logs) {
            String[] segment = log.split(" ");
            boolean isDigit = true;
            for (int i = 0; i < segment[1].length(); i++) {
                char c = segment[1].charAt(i);
                if (!('0' <= c && c <= '9')) {
                    isDigit = false;
                    break;
                }
            }
            if (isDigit) {
                digitLogs.add(log);
            } else {
                String logWithoutIdentifier = log.substring(log.indexOf(" ") + 1);
                letterLogToIds.putIfAbsent(logWithoutIdentifier, new ArrayList<>());
                letterLogToIds.get(logWithoutIdentifier).add(segment[0]);
            }
        }
        String[] result = new String[logs.length];
        int index = 0;
        for (Map.Entry<String, List<String>> e : letterLogToIds.entrySet()) {
            Collections.sort(e.getValue());
            for (String id : e.getValue()) {
                result[index] = id + " " + e.getKey();
                index++;
            }
        }
        for (String log : digitLogs) {
            result[index] = log;
            index++;
        }
        return result;
    }
}